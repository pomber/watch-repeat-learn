<link rel="import" href="../bower_components/polymer/polymer.html">

<link rel="import" href="../bower_components/app-layout/app-header/app-header.html">
<link rel="import" href="../bower_components/app-layout/app-toolbar/app-toolbar.html">

<link rel="import" href="../bower_components/paper-fab/paper-fab.html">
<link rel="import" href="../bower_components/iron-icons/av-icons.html">
<link rel="import" href="../bower_components/paper-input/paper-input.html">

<link rel="import" href="../bower_components/paper-item/paper-item.html">
<link rel="import" href="../bower_components/paper-item/paper-item-body.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">

<dom-module id="wrl-home">

  <template>

    <style>

      :host {
        display: block;
      }

    </style>
    
    <app-header>
        <app-toolbar>
            <div title>WRL</div>
        </app-toolbar>
    </app-header>
    
    <paper-input value="{{url}}" label="YouTube URL" autofocus type="search"></paper-input>
    <paper-button on-tap="load">Load</paper-button>

  </template>

  <script>

    Polymer({

      is: 'wrl-home',

      properties: {
          url: {
              type: String,
              value: "https://www.youtube.com/watch?v=wMhq1o0DULM"
          }
      },
      
      load: function() {
          var videoId = this._getYoutubeId(this.url);
          this.fire("wrl-home-load", videoId);
      },      
      
      _getYoutubeId: function(url) {
          var regExp = /^.*(youtu\.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;
          var match = url.match(regExp);
          if (match && match[2].length == 11) {
              return match[2];
          }
      },

    });

  </script>

</dom-module>
